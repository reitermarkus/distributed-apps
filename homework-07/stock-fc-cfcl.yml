---
name: stockFC
dataIns:
  - name: symbols
    type: collection
    source: symbols
  - name: symbol_count
    type: number
    source: symbol_count
dataOuts:
  - name: url
    type: string
    source: createChart/url
workflowBody:
  - parallel:
      name: pTicker
      dataIns:
        - name: symbol
          type: string
          source: stockFC/symbols
      parallelBody:
        - section:
            - parallelFor:
                name: pTicker_0
                dataIns:
                  - name: symbol
                    type: string
                    source: pTicker_0
                    constraints:
                      - name: distribution
                        value: BLOCK(1)
                dataOuts:
                  - name: symbols
                    type: collection
                    source: forecast_0
                  - name: object_keys
                    type: collection
                    source: forecast_0
                loopCounter:
                  from: "0"
                  to: "8"
                  step: "1"
                loopBody:
                  - function:
                      name: fetchProcess_0
                      type: fetchProcessType
                      dataIns:
                        - name: symbol
                          type: string
                          source: pTicker_0
                      dataOuts:
                        - name: symbol
                          type: string
                        - name: object_key
                          type: string
                      properties:
                        - name: resource
                          value: "${fetch_prices_rs_url}"
                  - function:
                      name: forecast_0
                      type: forecastType
                      dataIns:
                        - name: symbol
                          type: string
                          source: fetchProcess_0
                        - name: object_key
                          type: string
                          source: fetchProcess_0
                      dataOuts:
                        - name: symbol
                          type: string
                        - name: object_key
                          type: string
                      properties:
                        - name: resource
                          value: "${forecast_rs_url}"
        - section:
            - parallelFor:
                name: pTicker_1
                dataIns:
                  - name: symbol
                    type: string
                    source: pTicker_1
                    constraints:
                      - name: distribution
                        value: BLOCK(1)
                dataOuts:
                  - name: symbols
                    type: collection
                    source: forecast_1
                  - name: object_keys
                    type: collection
                    source: forecast_1
                loopCounter:
                  from: "8"
                  to: "20"
                  step: "1"
                loopBody:
                  - function:
                      name: fetchProcess_1
                      type: fetchProcessType
                      dataIns:
                        - name: symbol
                          type: string
                          source: pTicker_1
                      dataOuts:
                        - name: symbol
                          type: string
                        - name: object_key
                          type: string
                      properties:
                        - name: resource
                          value: "${fetch_prices_js_url}"
                  - function:
                      name: forecast_1
                      type: forecastType
                      dataIns:
                        - name: symbol
                          type: string
                          source: fetchProcess_1
                        - name: object_key
                          type: string
                          source: fetchProcess_1
                      dataOuts:
                        - name: symbol
                          type: string
                        - name: object_key
                          type: string
                      properties:
                        - name: resource
                          value: "${forecast_js_url}"
      dataOuts:
        - name: symbols
          type: collection
          source: forecast/symbol
        - name: object_keys
          type: collection
          source: forecast/object_key
  - function:
      name: processResult
      type: processResultType
      dataIns:
        - name: symbols
          type: collection
          source: pTicker/symbols
        - name: object_keys
          type: collection
          source: pTicker/object_keys
      dataOuts:
        - name: labels
          type: collection
        - name: datasets
          type: collection
      properties:
        - name: resource
          value: "rust:https://us-east.functions.appdomain.cloud/api/v1/web/a4bb0bee-592d-4406-9442-26dd24221c46/default/process_result_rs.json"
  - function:
      name: createChart
      type: createChartType
      dataIns:
        - name: labels
          type: collection
          source: processResult/labels
        - name: datasets
          type: collection
          source: processResult/datasets
      dataOuts:
        - name: url
          type: string
      properties:
        - name: resource
          value: "rust:https://us-east.functions.appdomain.cloud/api/v1/web/a4bb0bee-592d-4406-9442-26dd24221c46/default/create_chart_rs.json"